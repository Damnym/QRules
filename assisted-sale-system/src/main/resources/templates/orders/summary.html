<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/layout-evaluation :: head"></head>
<body style="font-size: 15px; background-color: #4C576C">
	<header th:replace="layout/layout-evaluation :: header"></header>
	<div class="container" style="margin-top: 5rem">
		<div class="row px-4">
			<div class="col">
	           <div class="card bg-white ">
	           	  <!-- Nombre del Paciente -->
	              <div th:text="${orderClientHeader}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
	              <div class="card-body border border-dark">
	                 <div class="row">
	                    <div class="col-5">  <!-- Datos de la cirugía -->
	                    	<div class="row">
	                    		<div class="col">
			                       <div class="card bg-white card-border-diferent">
			                          <div th:text="${opDecision}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
			                          <div class="card-body">
			                              <ul class="list-group">  <!-- Todo esto se saca de la orden -->
			                                 <li class="list-group-item list-group-item">
			                                    <span th:text="'Doctor: '" class="font-weight-bold"></span> 
			                                    <span th:text="${order.doctorName}"></span>
			                                 </li>
			                                 <li class="list-group-item">
			                                    <div class="row px-3 font-weight-bold" th:text="'Procedure(s)'"></div> 
			                                 	<div th:each="procedureData: ${order.procedureList}" class="row px-4">
				                                    <span th:text="${procedureData.procedure.name}"></span> &nbsp;
				                                    <span th:text="'($' + ${procedureData.subTotal} + ')'" style="font-style: italic;"></span>
			                                 	</div>
			                                 </li>
			                                 <li class="list-group-item">
			                                    <span th:text="'Desired surgery date: '" class="font-weight-bold"></span>
			                                    <span th:text="${order.dateSurgery}"></span></li>
			                              </ul>
			                          </div>
			                       </div>
	                       		</div>
	                        </div>
	                        <div class="row mt-1" style="height: 10em;">
	                        	<div class="col">
	                        		<div class="card border-warning card-border-diferent">
	                        			<div th:text="'Observations'" class="card-header py-2 font-weight-bold bg-warning"  align="center"></div>
					                    <textarea th:text="${order.observation}" readonly="readonly" style="height:10em; border-width: 0" class="px-3"></textarea>
					                 </div>
	                        	</div>
	                        </div>
	                    </div>   
	                    <div class="col-7">    <!-- Datos item comprados-->
	                        <div class="card bg-white card-border-diferent rounded-bottom"> 
	                           <div th:text="${itemsheader}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
	                           <div class="card-body">
	                           		<table th:if="${not #lists.isEmpty(order.itemList)}" class="table table-striped table-hover">
	                                	<thead align="center" >
	                                    	<tr>
		                                    	<th scope="col">Item</th>
	        	                                <th scope="col">Amount</th>
	            	                            <th scope="col">Subtotal</th>
	                	                    </tr>
	                    	            </thead>
	                       	            <tbody>
	                            	    	<tr th:each="line: ${order.itemList}">
	                                	    	<td th:text="${line.product.name}"></td>
	                                        	<td th:text="${line.amount}" align="center"></td>
	                                            <td th:text="'$' + ${line.subTotal}" align="center"></td>
	                                       	</tr>
		                                </tbody>
	    	                        </table>
	    	                        <h6 th:if="${order.discount} > 0" th:text="'* The order has discount in items'"></h6>
	                           </div>
	                        </div>
	                     </div>          
	                 </div>
	                 <div class="row"> <!-- Precio total -->
					 	<div class="col" >
	                    	<h6 align="right" th:text="'Payment method: ' + ${order.payMethod}" style="text-decoration: underline"></h6>
	                    	<h6 th:if="${order.vip} != null" align="right" th:text="'VIP price: ' + ${order.vip.priceForVIP}" style="text-decoration: underline"></h6>
	                    	<h6 align="right">
	                    		Total order: 
	                    		<span th:unless="${order.discount} > 0" th:text="'$ ' + ${order.totalOrder}" class="badge badge-success">0</span>
	                    		<span th:if="${order.discount} > 0" th:text="'$ ' + ${order.totalOrder}" class="badge badge-secondary">0</span>
	                    	</h6>
	                    	<h6 th:if="${order.discount} > 0" align="right">Discount: <span th:text="'$ ' + ${order.discount}" class="badge badge-secondary">0</span></h6>
	                    	<h6 th:if="${order.discount} > 0" align="right">
	                    		Total order with discount: <span th:text="'$ ' + ${order.totalOrderWithDiscount}" class="badge badge-success">0</span>
	                    	</h6>
	                    </div>
	                 </div>
	                 <div class="row my-1">
		                 <div class="col-6" align="left">      <!-- CAMBIAR ESTE LINK -->                            
	    	             	<a th:href="@{/doctor_or_procedure/} + ${sOrderId}" th:text="'Add other surgery'" class="btn btn-lg btn-block btn-305"></a> 
	        	         </div>
	            	     <div class="col-6" align="right">                                
	                	 	<a th:href="@{/orders/view-order/} + ${sOrderId}" th:text="'View pre-order'" class="btn btn-lg btn-block btn-305"></a>
	                 	</div>
	                 </div>
	              </div> 
	           </div>
			</div>
		</div>
    </div>
	<footer th:replace="layout/layout-evaluation :: footer"></footer>
</body>
</html>