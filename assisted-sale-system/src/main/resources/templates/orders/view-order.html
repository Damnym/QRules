<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout-evaluation :: head"></head>
<body  style="font-size: 15px; background-color: #4C576C">
    <p hidden="true" th:text="${text}" id="text2clip"> </p>
    
   <header th:replace="layout/layout-evaluation :: header"></header>
   <div class="container" style="margin-top: 4rem" >
	<div class="row">
		<div class="col-11">
			<a th:href="@{'/orders/view-order/' + ${superOrder.id}(format=pdf)}" class="btn btn-xs" target="_blank"> 
				<img th:src="@{/imgs/pdfw.png}" alt="pdf-view" data-toggle="tooltip" data-placement="Right" title="Save in PDF format">
			</a>
		</div>
		<div class="col-1">
            <button type="button" class="btn far fa-clipboard fa-3x" style="color: #ffffff;"
                    onclick="copyToClipboard('text2clip')" data-toggle="tooltip" data-placement="left" title="Copy to Clipboard"></button>
		</div>
	</div>
	<div class="row mt-2 ">   <!-- Contenedor -->
		<div class="col">     <!-- para todo el ancho -->
			<div class="card bg-white border border-dark rounded-bottom">
				<div th:text="${orderClientHeader}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
				<div class="card-body">
					<div class="row py-2">   <!-- Datos personales y condicion de salud-->
						<div class="col-6">  <!-- Datos personales--> 
							<div class="row">
								<div class="col-12">
									<div class="card bg-white card-border-diferent">
										<div th:text="${personalDataHeader}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
										<div class="card-body ">
											<ul class="list-group">
												<li class="list-group-item list-group-item-dark">
													<span th:text="'Full name: '" class="font-weight-bold"></span> 
													<span th:text="${client.name} + ' ' + ${client.surname}"></span>
												</li>
												<li class="list-group-item">
													<span th:text="'Gender: '" class="font-weight-bold"></span> 
													<span th:text="${client.gender}"></span>
												</li>
												<li class="list-group-item">
													<span th:text="'Age: '" class="font-weight-bold"></span> 
													<span th:text="${client.age}"></span>
												</li>
												<li class="list-group-item">
													<span th:text="'Mobile phone number: '" class="font-weight-bold"></span>
													<span th:text="${client.mobile}"></span>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-6">  <!-- CondiciÃ³n de salud-->
							<div class="row">
								<div class="col-12 ">
									<div class="card bg-white card-border-diferent">
										<div th:text="${healthConditionHeader}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
										<div class="card-body ">
											<ul class="list-group">
												<li class="list-group-item">
													<span th:text="'Weight: '" class="font-weight-bold"></span> 
													<span th:text="${client.weight}"></span>
												</li>
												<li class="list-group-item">
													<span th:text="'Height: '" class="font-weight-bold"></span> 
													<span th:text="${client.heightFeetOrCentimeters}"></span> 
													<span th:if="${client.heightInches}" th:text="'.' + ${client.heightInches} + '\'\''"></span>
												</li>
												<li class="list-group-item">
													<span th:text="'Hemoglobin: '" class="font-weight-bold"></span> 
													<span th:text="${client.hbg}"></span>
												</li>
												<li class="list-group-item list-group-item-dark">
													<span th:text="'Conditions: '" class="font-weight-bold"></span> 
													<span th:text="${conditionList}"></span>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div> 
					<div class="row"> <!-- Datos orden -->
						<div class="col"> 
							<div class="card bg-white card-border-diferent">
								<div th:text="${tittle}" class="card-header py-2 text-white font-weight-bold" style="background-color: #101F3A" align="center"></div>
								<div class="card-body">
									<div class="row"> 
										<div class="container">
										  <ul class="nav nav-tabs" role="tablist">
										    <li class="nav-item">
										      <a class="nav-link active text-305" data-toggle="tab" href="#home" th:text="Summary" style="font-weight: bold;"></a>
										    </li>
										    <li th:each="order: ${superOrder.orderList}" class="nav-item">
										    	<a th:if="${order.procedureList.size()>1}" class="nav-link text-305" data-toggle="tab" th:href="'#menu' + ${order.id}" 
										    	   th:text="'(' + ${order.procedureList.get(0).procedure.name} + '+' + ${order.procedureList.get(1).procedure.name} + ')'">
										    	</a>
										    	<a th:unless="${order.procedureList.size()>1}" class="nav-link text-305" data-toggle="tab" th:href="'#menu' + ${order.id}" 
										    	   th:text="'(' + ${order.procedureList.get(0).procedure.name} + ')'">
										    	</a>
										    </li>
										  </ul>
										  <div class="tab-content">
										    <div id="home" class="container tab-pane active"><br>
										    	<div class="row">
										      		<h5>Included</h5>
										    	</div>
										      	<div class="row">
													<div class="col newspaper1">
														<ul>
															<li th:each="i: ${included}"><span th:text="${i}"></span></li>
														</ul>
													</div>
										      	</div>
												<div class="row my-2">
													<div class="col-12">  <!-- Observaciones-->
														<ul class="list-group">
															<li class="list-group-item border border-warning">
																<span th:text="'Observation: '" class="font-weight-bold"></span> 
																<span th:text="${superOrder.observation}"></span>
															</li>
														</ul>
													</div>
												</div>
												<div class="row">
													<div class="col my-2">
														<h5 align="right">Total order: <span th:text="'$ ' + ${superOrder.totalOrder}" class="badge badge-success">0</span></h5>
													</div>
												</div>
										    </div>
										    
											<!--un tab por cada Orden -->
										    <div th:each="order: ${superOrder.orderList}" th:id="'menu' + ${order.id}" class="container tab-pane fade"><br> 
										    	<div class="row">
										    		<div class="col-6">
											    		<ul class="list-group">
															<li class="list-group-item list-group-item-dark">
																<span th:text="'Doctor: '" class="font-weight-bold"></span> 
																<span th:text="'Dr.' + ${order.doctorName}"></span>
															</li>
															<li th:each="orderProcedure: ${order.procedureList}" class="list-group-item">
																<span th:text="${orderProcedure.procedure.name}"></span> 
																<span th:text="'(' + ${orderProcedure.subTotal} + ')'" style="font-style: italic;"></span>
															</li>
															<li class="list-group-item list-group-item">
																<span th:text="'Desired operation date: '" class="font-weight-bold"></span> 
																<span th:text="${order.dateSurgery}"></span>
															</li>
														</ul>
										    		</div>
										      		<div class="col-6">
										      			<span th:text="'Mandatory and/or selected items'" class="font-weight-bold"></span>	
											  			<table th:if="${not #lists.isEmpty(order.itemList)}" class="table table-striped table-bordered table-hover my-2">
			    											<thead align="center" class="thead-dark">
																<tr>
																	<th scope="col">Item</th>
																	<th scope="col">Price</th>
																	<th scope="col">Amount</th>
																	<th scope="col">Subtotal</th>
																</tr>
															</thead>
															<tbody>
																<tr th:each="line: ${order.itemList}">
																	<td th:text="${line.product.name}"></td>
																	<td th:text="'$' + ${line.product.price}" align="right"></td>
																	<td th:text="${line.amount}" align="center"></td>
											 						<td th:text="'$' + ${line.subTotal}" align="center"></td>
																</tr>
															</tbody>
														</table> 	
										      		</div>
										      	</div>
										      	<div class="row mt-2">
											      	<div class="col-12">  <!-- Observaciones-->
														<ul class="list-group">
															<li class="list-group-item border border-warning">
																<span th:text="'Observation: '" class="font-weight-bold"></span> 
																<span th:text="${order.observation}"></span>
															</li>
														</ul>
													</div>
										      	</div>
										      	<div class="row mt-2">
													<div class="col">
														<h6 th:if="${order.vip} != null" align="right" 
														    th:text="'VIP price: ' + ${order.vip.priceForVIP}" style="text-decoration: underline"></h6>
								                    	<h6 align="right">
							                    			Total order: 
							                    			<span th:unless="${order.discount} > 0" th:text="'$ ' + ${order.totalOrder}" class="badge badge-success">0</span>
							                    			<span th:if="${order.discount} > 0" th:text="'$ ' + ${order.totalOrder}" class="badge badge-secondary">0</span>
							                    		</h6>
							                    		<h6 th:if="${order.discount} > 0" align="right">
							                    			Discount: 
							                    			<span th:text="'$ ' + ${order.discount}" class="badge badge-secondary">0</span>
							                    		</h6>
							                    		<h6 th:if="${order.discount} > 0" align="right">
							                    			Total order with discount: 
							                    			<span th:text="'$ ' + ${order.totalOrderWithDiscount}" class="badge badge-success">0</span>
							                    		</h6>
													</div>
												</div>
										    </div>
										  </div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-5">
			<a th:href="@{'/orders/view-order/' + ${superOrder.id}(format=pdf)}" class="btn btn-xs" target="_blank"> 
				<img  th:src="@{/imgs/pdfw.png}" alt="pdf-view" data-toggle="tooltip" data-placement="Right" title="Save in PDF format">
			</a>
		</div>
		<div class="col-6">
			<a class="btn btn-xs" th:href="@{#}" data-toggle="tooltip" data-placement="left" title="Up"> 
				<i class="fa fa-angle-up rotate-icon fa-2x" style="color: #ffffff;"> </i>
			</a>
		</div>
		<div class="col-1">
            <button type="button" class="btn far fa-clipboard fa-3x" style="color: #ffffff;"
                    onclick="copyToClipboard('text2clip')" data-toggle="tooltip" data-placement="left" title="Copy to Clipboard"></button>
		</div>
	</div>
	
	<div class="row">
		<div class="col pb-3 mt-3" align="right">                                 
			<a th:href="@{/clients/form/}" th:text="'Next patient'" class="btn btn-lg btn-block btn-305"></a>
		</div>
	</div>	
   </div>
   
	<footer th:replace="layout/layout-evaluation :: footer"></footer>
    <script type="text/javascript">
      function copyToClipboard(elementid){
    	  var element = document.getElementById(elementid)
    	  
    	  var text = $(element).clone().find('br').prepend('\r\n').end().text() 
           element = $('<textarea>').appendTo('body').val(text).select() 
           document.execCommand('copy') 
           element.remove() ;
    	   bootbox.alert({
    		    message: "Text copied to clipboard!",
    		    size: 'small'
    		});
      };
   </script>
	<script type="text/javascript">
 		$(function () {
		  $('[data-toggle="tooltip"]').tooltip()
		})
	</script>
</body>
</html>