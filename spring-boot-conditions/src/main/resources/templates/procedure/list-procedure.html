<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
       <link rel="stylesheet" th:href="@{/css/jquery.dataTables.min.css}">
   <head th:replace="layout/layout-procedure :: head"></head>
   <body>
      <header th:replace="layout/layout-procedure :: header"></header>
      <div class="container py-4">
         <div class="card bg-white border-305">
            <div th:text="${tittle}" class="card-header border-305 text-white font-weight-bold" style="background-color: #0F3678" align="center"></div>
            <div class="card-body">
               <div class="row">
                  <div class="col" align="right">
                      <a th:href="@{/procedure/form/}" data-toggle="tooltip" data-placement="top" title="New procedure" class="a a-305 fas fa-window-maximize fa-2x"></a>
                  </div>
               </div>
               <div class="row pt-2">
                  <div class="col">
                     <table class="table table-striped hover compact"  id="procedure-table-list" style="font-size: 14px">
                     <!-- table-bordered -->
                        <thead align="center">
                           <tr>
                              <th th:text="'Name'" scope="col"></th>
                              <th th:text="'Cell saver required?'" scope="col"></th>
                              <th th:text="'Items recomended'" scope="col"></th>
                              <th th:text="Edit" scope="col"></th>
                              <th th:text="Remove" scope="col"></th>
                           </tr>
                        </thead>
                        <tbody >
                           <tr th:each="p: ${procedureList}">
                              <td th:text="${p.name}" align="justify"></td>
                              <td th:if ="${p.requiredCellSaver}" align="center"><span class="fas fa-check"></span></td>
                              <td th:unless ="${p.requiredCellSaver}" align="center"><span></span></td>
                           <!-- Ver items -->
                              <td align="center">  
                                 <a th:if="${not #lists.isEmpty(p.productRecommendedList)}"  th:href="@{/procedure/list-procedure/} + ${p.id}" class="a a-305 fas fa-tag" style="color: #000"></a>   
                              </td>
                           <!-- Editar procedure -->
                              <td align="center">
                                 <a th:href="@{/procedure/form/} + ${p.id}" class="a a-305 fas fa-pencil-alt" style="color: #000"></a>
                              </td>
                           <!-- Eliminar procedure -->
                            <td align="center">
                              <a th:href="'/procedure/delete/' + ${p.id}" onclick="return confirm('Do you want remove this procedure?');" type="button" class="btn fas fa-eraser"></a> 
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div> 
               <div th:if="${prodsRecomended} and ${not #lists.isEmpty(prodsRecomended)}" class="row">
                  <span th:text="' List of the ' + ${#lists.size(prodsRecomended)} + ' items that are recommended for &quot' + ${procedureName} + '&quot procedure, 
                                 and the its recommended amount for each item.'" 
                        style="color: #0F3678; font-weight: bold; text-decoration: underline;" class="mx-3"></span> 
                  <div class="row my-2">
                     <div class="col twoColumn305" align="right">
                        <ul  class=" border-success">
                           <li th:each="p: ${prodsRecomended}" th:text="${p.product.name} + ' --> ' + ${p.amountRecommended}" class="text-left border-success"></li>
                        </ul>
                     </div>
                  </div>   
               </div> 
               <div th:if="${prodsRecomended} and ${#lists.isEmpty(prodsRecomended)}"  class="alert alert-dismissible fade show border-danger my-2" align="center" role="alert" style="background-color:#FFFFFF;">
                  <span th:text="'The procedure &quot' + ${procedureName}  + '&quot has not recommended item.'" style="color: #0F3678; font-weight: bold; "></span>
                  <a th:href="@{/#/}" title="Click to add a item" th:text="${'Add a item'}" style="color:#0F3678; text-decoration: underline;" 
                     data-toggle="tooltip" data-placement="left" ></a>     
                     <button type="button" class="close" style="color:#0F3678" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                     </button>
               </div>
               
                



            </div>
         </div>
      </div>
      <footer th:replace="layout/layout-procedure :: footer"></footer>
      <script th:src="@{/js/jquery.dataTables.min.js}"></script>
      <script th:replace="procedure/js/util-js.html :: util"></script>
   </body>
</html>